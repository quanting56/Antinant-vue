import{s as un}from"./transform-B_k4wlz9.js";import{r as on,o as cn,c as ln,f as fn}from"./index-4wr-KfXx.js";import{c as b}from"./constant-BhYcI2Bl.js";import{w as gn}from"./path-DyVhHtw_.js";const tn=Math.abs,c=Math.atan2,C=Math.cos,mn=Math.max,en=Math.min,I=Math.sin,H=Math.sqrt,m=1e-12,J=Math.PI,W=J/2,yn=2*J;function hn(t){return t>1?0:t<-1?J:Math.acos(t)}function sn(t){return t>=1?W:t<=-1?-W:Math.asin(t)}function pn(t){return t.innerRadius}function dn(t){return t.outerRadius}function xn(t){return t.startAngle}function vn(t){return t.endAngle}function An(t){return t&&t.padAngle}function Rn(t,l,v,T,A,R,j,r){var S=v-t,u=T-l,n=j-A,h=r-R,a=h*S-n*u;if(!(a*a<m))return a=(n*(l-R)-h*(t-A))/a,[t+a*S,l+a*u]}function V(t,l,v,T,A,R,j){var r=t-v,S=l-T,u=(j?R:-R)/H(r*r+S*S),n=u*S,h=-u*r,a=t+n,i=l+h,f=v+n,g=T+h,O=(a+f)/2,o=(i+g)/2,p=f-a,y=g-i,M=p*p+y*y,P=A-R,w=a*g-f*i,q=(y<0?-1:1)*H(mn(0,P*P*M-w*w)),B=(w*y-p*q)/M,E=(-w*p-y*q)/M,k=(w*y+p*q)/M,d=(-w*p+y*q)/M,x=B-O,e=E-o,s=k-O,z=d-o;return x*x+e*e>s*s+z*z&&(B=k,E=d),{cx:B,cy:E,x01:-n,y01:-h,x11:B*(A/P-1),y11:E*(A/P-1)}}function Mn(){var t=pn,l=dn,v=b(0),T=null,A=xn,R=vn,j=An,r=null,S=gn(u);function u(){var n,h,a=+t.apply(this,arguments),i=+l.apply(this,arguments),f=A.apply(this,arguments)-W,g=R.apply(this,arguments)-W,O=tn(g-f),o=g>f;if(r||(r=n=S()),i<a&&(h=i,i=a,a=h),!(i>m))r.moveTo(0,0);else if(O>yn-m)r.moveTo(i*C(f),i*I(f)),r.arc(0,0,i,f,g,!o),a>m&&(r.moveTo(a*C(g),a*I(g)),r.arc(0,0,a,g,f,o));else{var p=f,y=g,M=f,P=g,w=O,q=O,B=j.apply(this,arguments)/2,E=B>m&&(T?+T.apply(this,arguments):H(a*a+i*i)),k=en(tn(i-a)/2,+v.apply(this,arguments)),d=k,x=k,e,s;if(E>m){var z=sn(E/a*I(B)),K=sn(E/i*I(B));(w-=z*2)>m?(z*=o?1:-1,M+=z,P-=z):(w=0,M=P=(f+g)/2),(q-=K*2)>m?(K*=o?1:-1,p+=K,y-=K):(q=0,p=y=(f+g)/2)}var F=i*C(p),G=i*I(p),L=a*C(P),N=a*I(P);if(k>m){var Q=i*C(y),U=i*I(y),X=a*C(M),Y=a*I(M),D;if(O<J)if(D=Rn(F,G,X,Y,Q,U,L,N)){var Z=F-D[0],$=G-D[1],_=Q-D[0],nn=U-D[1],rn=1/I(hn((Z*_+$*nn)/(H(Z*Z+$*$)*H(_*_+nn*nn)))/2),an=H(D[0]*D[0]+D[1]*D[1]);d=en(k,(a-an)/(rn-1)),x=en(k,(i-an)/(rn+1))}else d=x=0}q>m?x>m?(e=V(X,Y,F,G,i,x,o),s=V(Q,U,L,N,i,x,o),r.moveTo(e.cx+e.x01,e.cy+e.y01),x<k?r.arc(e.cx,e.cy,x,c(e.y01,e.x01),c(s.y01,s.x01),!o):(r.arc(e.cx,e.cy,x,c(e.y01,e.x01),c(e.y11,e.x11),!o),r.arc(0,0,i,c(e.cy+e.y11,e.cx+e.x11),c(s.cy+s.y11,s.cx+s.x11),!o),r.arc(s.cx,s.cy,x,c(s.y11,s.x11),c(s.y01,s.x01),!o))):(r.moveTo(F,G),r.arc(0,0,i,p,y,!o)):r.moveTo(F,G),!(a>m)||!(w>m)?r.lineTo(L,N):d>m?(e=V(L,N,Q,U,a,-d,o),s=V(F,G,X,Y,a,-d,o),r.lineTo(e.cx+e.x01,e.cy+e.y01),d<k?r.arc(e.cx,e.cy,d,c(e.y01,e.x01),c(s.y01,s.x01),!o):(r.arc(e.cx,e.cy,d,c(e.y01,e.x01),c(e.y11,e.x11),!o),r.arc(0,0,a,c(e.cy+e.y11,e.cx+e.x11),c(s.cy+s.y11,s.cx+s.x11),o),r.arc(s.cx,s.cy,d,c(s.y11,s.x11),c(s.y01,s.x01),!o))):r.arc(0,0,a,P,M,o)}if(r.closePath(),n)return r=null,n+""||null}return u.centroid=function(){var n=(+t.apply(this,arguments)+ +l.apply(this,arguments))/2,h=(+A.apply(this,arguments)+ +R.apply(this,arguments))/2-J/2;return[C(h)*n,I(h)*n]},u.innerRadius=function(n){return arguments.length?(t=typeof n=="function"?n:b(+n),u):t},u.outerRadius=function(n){return arguments.length?(l=typeof n=="function"?n:b(+n),u):l},u.cornerRadius=function(n){return arguments.length?(v=typeof n=="function"?n:b(+n),u):v},u.padRadius=function(n){return arguments.length?(T=n==null?null:typeof n=="function"?n:b(+n),u):T},u.startAngle=function(n){return arguments.length?(A=typeof n=="function"?n:b(+n),u):A},u.endAngle=function(n){return arguments.length?(R=typeof n=="function"?n:b(+n),u):R},u.padAngle=function(n){return arguments.length?(j=typeof n=="function"?n:b(+n),u):j},u.context=function(n){return arguments.length?(r=n??null,u):r},u}const In={__name:"D3jsArcsDemo",setup(t){const l=on(null);return cn(()=>{const v=Mn().innerRadius(80).outerRadius(90).startAngle(Math.PI*1.2).endAngle(Math.PI*2.8);un(l.value).append("g").attr("transform","translate(200, 100)").append("path").attr("d",v).attr("stroke","black").attr("fill","rgba(31, 211, 255, 0.2)")}),(v,T)=>(fn(),ln("svg",{ref_key:"arcSvgRef",ref:l,width:"500",height:"200"},null,512))}};export{In as default};
