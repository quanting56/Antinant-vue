import"./transform-DNQUPihx.js";import{b as f}from"./band-CibOmBXR.js";import{l as B}from"./linear-IoaARM7T.js";import{o as C}from"./ordinal-BXh_4XLC.js";import{r as k,o as w,c as E,f as A}from"./index-B1OBybhT.js";import{s as D}from"./select-1EGbaqqT.js";import{a as S,c as j}from"./axis-qL51v-F_.js";import{p as h}from"./pointer-BV9FWJ6s.js";import"./init-Dmth1JHB.js";import"./range-OtVwhkKS.js";import"./continuous-DdKr3jbY.js";import"./value-BWAEs6ZY.js";import"./round-O1hten6x.js";import"./defaultLocale-B0Uv6ZVb.js";const x=600,l=400,K={__name:"D3jsMultiBarChartDemo",setup(M){const m=k(null),a={top:20,right:20,bottom:100,left:40},s=[{年度:2017,"15~24歲(千人)":80,"25~44歲(千人)":506,"45~64歲(千人)":381,"65歲及以上(千人)":35},{年度:2018,"15~24歲(千人)":80,"25~44歲(千人)":508,"45~64歲(千人)":392,"65歲及以上(千人)":38},{年度:2019,"15~24歲(千人)":82,"25~44歲(千人)":511,"45~64歲(千人)":398,"65歲及以上(千人)":39},{年度:2020,"15~24歲(千人)":79,"25~44歲(千人)":504,"45~64歲(千人)":387,"65歲及以上(千人)":42}];return w(()=>{const e=D(m.value).append("svg").attr("width",x).attr("height",l),c=s.map(t=>t.年度),i=f().domain(c).range([a.left,x-a.right]).padding(.2),g=S(i);e.append("g").attr("transform",`translate(0, ${l-a.bottom})`).call(g);const o=B().domain([0,600]).range([l-a.bottom,a.top]).nice(),_=j(o).ticks(5).tickSize(3);e.append("g").attr("transform",`translate(${a.left}, 0)`).call(_);const n=Object.keys(s[0]).slice(1),p=f().domain(n).range([0,i.bandwidth()]).padding(.05),d=C().domain(n).range(["#d4be92","#c2cccd","#b2c2e3","#ead0d1"]);e.append("g").selectAll("g").data(s).join("g").attr("transform",t=>`translate(${i(t.年度)}, 0)`).selectAll("rect").data(t=>n.map(r=>({key:r,value:t[r]}))).join("rect").attr("x",t=>p(t.key)).attr("y",t=>o(t.value)).attr("width",p.bandwidth()).attr("height",t=>l-a.bottom-o(t.value)).attr("fill",t=>d(t.key)).style("cursor","pointer").on("mouseover",y).on("mousemove",b).on("mouseleave",v);function y(t){const r=h(t,e.node());e.append("text").attr("class","multiBarChartExampleInfoText").attr("x",a.left).attr("y",o(t.target.__data__.value)).attr("fill","#121212").style("font-size","18px").style("font-weight","bold").style("text-anchor","middle").text(t.target.__data__.value+"千人"),e.append("line").attr("class","multiBarChartExampleDashedY").attr("x1",a.left).attr("y1",o(t.target.__data__.value)).attr("x2",r[0]).attr("y2",o(t.target.__data__.value)).style("stroke","black").style("stroke-dasharray",3)}function b(t){const r=h(t,e.node());e.selectAll(".multiBarChartExampleDashedY").attr("x2",r[0])}function v(){e.select(".multiBarChartExampleInfoText").remove(),e.select(".multiBarChartExampleDashedY").remove()}const u=e.append("g").selectAll("g").data(n).join("g").attr("class","multiBarChartExampleTags");u.append("rect").attr("x",(t,r)=>(r+1)*a.bottom*1.3).attr("y",l-a.bottom/2).attr("width",20).attr("height",20).attr("fill",t=>d(t)),u.append("text").attr("x",(t,r)=>(r+1)*a.bottom*1.3).attr("y",l-a.bottom/2+40).style("fill","#121212").style("font-size","12px").style("font-weight","bold").style("text-anchor","middle").text(t=>t)}),(e,c)=>(A(),E("div",{ref_key:"multiBarChartContainerRef",ref:m},null,512))}};export{K as default};
