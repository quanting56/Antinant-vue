import"./transform-DNQUPihx.js";import{l as d}from"./linear-IoaARM7T.js";import{e as f}from"./extent-Ccx1MofX.js";import{j as w,g as C,h as L}from"./category10-aLVps2F5.js";import{o as j}from"./ordinal-BXh_4XLC.js";import{r as A,o as F,c as M,f as S}from"./index-DXUUkKRE.js";import{s}from"./select-1EGbaqqT.js";import{a as T,c as B}from"./axis-qL51v-F_.js";import{l as E}from"./line-CnRH6wfh.js";import{p as G}from"./pointer-BV9FWJ6s.js";import"./continuous-DdKr3jbY.js";import"./value-BWAEs6ZY.js";import"./round-O1hten6x.js";import"./init-Dmth1JHB.js";import"./defaultLocale-B0Uv6ZVb.js";import"./colors-Cc3OSVma.js";import"./array-DEnAxiAM.js";import"./constant-BhYcI2Bl.js";import"./path-CsjuoHvu.js";const u=600,l=400,e=50,et={__name:"D3jsMultiLineChartDemo",setup(I){const n=A(null);return F(async()=>{const r=s(n.value).append("svg").attr("width",u).attr("height",l),o=(await w("https://data.moa.gov.tw/Service/OpenData/TransService.aspx?UnitId=5n9c3AlEJ2DH&IsTransData=1")).filter(t=>t.observeDate.substring(0,4)==="2023"),g=o.map(t=>t.observeDate.substring(4,6)),h=o.map(t=>{let a=parseFloat(t.rainfall);return a=a||0}),p=d().domain(f(g)).range([e,u-e]).nice(),v=T(p).ticks(8).tickFormat(t=>t+"æœˆ");r.append("g").attr("transform",`translate(0, ${l-e})`).call(v);const m=d().domain(f(h)).range([l-e,e]).nice(),x=B(m).tickFormat(t=>t+"mm");r.append("g").attr("transform",`translate(${e}, 0)`).call(x);const _=C(o,t=>t.observatory),k=j().domain(o.map(t=>t.item)).range(L),c=s(n.value).style("position","relative").append("div").attr("class","multiLineChartNameTag").style("position","absolute").style("background-color","#121212").style("color","#f2f2f2").style("border-radius","5px").style("padding","10px").style("display","none");r.append("g").selectAll("path").data(_).join("path").attr("d",t=>E().x(a=>p(a.observeDate.substr(4,6))).y(a=>{let i=parseFloat(a.rainfall);return i=i||0,m(i)})(t[1])).attr("fill","none").attr("stroke",t=>k(t)).attr("stroke-width",1.5).style("cursor","pointer").on("mouseover",b).on("mouseleave",D);function b(t){let a=G(t,t.target);s(this).style("stroke-width","5"),c.style("display","block").html(t.target.__data__[0]).style("left",a[0]+10+"px").style("top",a[1]+"px")}function D(){s(this).style("stroke-width","1.5"),c.style("display","none")}}),(r,y)=>(S(),M("div",{ref_key:"multiLineChartContainerRef",ref:n},null,512))}};export{et as default};
