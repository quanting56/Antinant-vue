import"./transform-DNQUPihx.js";import{b as v}from"./band-CibOmBXR.js";import{l as B}from"./linear-IoaARM7T.js";import{o as C}from"./ordinal-BXh_4XLC.js";import{r as w,o as j,c as A,f as S}from"./index-DXUUkKRE.js";import{s as l}from"./select-1EGbaqqT.js";import{a as D,c as M}from"./axis-qL51v-F_.js";import{s as T}from"./stack-D1BzCQg9.js";import{p as h}from"./pointer-BV9FWJ6s.js";import"./init-Dmth1JHB.js";import"./range-OtVwhkKS.js";import"./continuous-DdKr3jbY.js";import"./value-BWAEs6ZY.js";import"./round-O1hten6x.js";import"./defaultLocale-B0Uv6ZVb.js";import"./array-DEnAxiAM.js";import"./constant-BhYcI2Bl.js";const g=600,r=400,V={__name:"D3jsStackedBarChartDemo",setup(z){const d=w(null),a={top:20,right:20,bottom:100,left:40},n=[{年度:2017,"15~24歲(千人)":80,"25~44歲(千人)":506,"45~64歲(千人)":381,"65歲及以上(千人)":35},{年度:2018,"15~24歲(千人)":80,"25~44歲(千人)":508,"45~64歲(千人)":392,"65歲及以上(千人)":38},{年度:2019,"15~24歲(千人)":82,"25~44歲(千人)":511,"45~64歲(千人)":398,"65歲及以上(千人)":39},{年度:2020,"15~24歲(千人)":79,"25~44歲(千人)":504,"45~64歲(千人)":387,"65歲及以上(千人)":42}];return j(()=>{const e=l(d.value).append("svg").attr("width",g).attr("height",r),p=n.map(t=>t.年度),i=v().domain(p).range([a.left,g-a.right]).padding(.2),x=D(i);e.append("g").attr("transform",`translate(0, ${r-a.bottom})`).call(x);const s=B().domain([0,1200]).range([r-a.bottom,a.top]).nice(),y=M(s).ticks(5).tickSize(3);e.append("g").attr("transform",`translate(${a.left}, 0)`).call(y);const c=Object.keys(n[0]).slice(1),u=T().keys(c)(n),m=C().domain(c).range(["#97a9bf","#d6dbbb","#d4e6e8","#dcd2d0"]);e.append("g").selectAll("g").data(u).join("g").attr("fill",t=>m(t.key)).selectAll("rect").data(t=>t).join("rect").attr("x",t=>i(t.data.年度)).attr("y",t=>s(t[1])).attr("height",t=>s(t[0])-s(t[1])).attr("width",i.bandwidth()).style("cursor","pointer").on("mouseover",b).on("mousemove",k).on("mouseleave",_);function b(t){const o=h(t,e.node());l(this).style("opacity",.5),e.append("text").attr("class","stackedBarChartInfoText").attr("fill","#121212").style("font-size","18px").style("font-weight","bold").style("text-anchor","start").attr("x",o[0]).attr("y",o[1]-20).text(t.target.__data__[1]-t.target.__data__[0]+" 千人")}function k(t){const o=h(t,e.node());e.select(".stackedBarChartInfoText").attr("x",o[0]+10).attr("y",o[1]-15)}function _(){l(this).style("opacity","1"),e.select(".stackedBarChartInfoText").remove()}const f=e.append("g").selectAll("g").data(c).join("g").attr("class","stackedBarChartTags");f.append("rect").attr("x",(t,o)=>(o+1)*a.bottom*1.3).attr("y",r-a.bottom/2).attr("width",20).attr("height",20).attr("fill",t=>m(t)),f.append("text").attr("x",(t,o)=>(o+1)*a.bottom*1.3).attr("y",r-a.bottom/2+40).style("fill","#121212").style("font-size","12px").style("font-weight","bold").style("text-anchor","middle").text(t=>t)}),(e,p)=>(S(),A("div",{ref_key:"stackedBarChartContainerRef",ref:d},null,512))}};export{V as default};
