import"./transform-DNQUPihx.js";import{c as C}from"./第11屆全國不分區及僑居國外國民立法委員選舉各政黨在北北基桃各投開票所得票數一覽表-CaMA2Gpg.js";import{_ as j,r as B,o as D,c as M,f as O,b as y,n as T,F as Y}from"./index-CHtcQ5JH.js";import{l as $}from"./linear-IoaARM7T.js";import{e as w}from"./extent-Ccx1MofX.js";import{s as i}from"./select-1EGbaqqT.js";import{a as S,c as E}from"./axis-qL51v-F_.js";import{c as A}from"./dsv-CbZ0YcQP.js";import{b as p}from"./defaultLocale-B0Uv6ZVb.js";import{p as z}from"./pointer-BV9FWJ6s.js";import"./continuous-DdKr3jbY.js";import"./value-BWAEs6ZY.js";import"./round-O1hten6x.js";import"./init-Dmth1JHB.js";import"./text-5Xu4kz8q.js";const f=600,v=400,G={__name:"D3jsSwitchBubbleChartsDemo",setup(P){const u=B(null),e={top:20,right:20,bottom:50,left:63};let r,_,g;D(()=>{r=i(u.value).append("svg").attr("width",f).attr("height",v),_=$().domain([0,6e5]).range([e.left,f-e.right]).nice();const o=S(_);r.append("g").attr("transform",`translate(0, ${v-e.bottom})`).call(o),g=$().domain([0,.5]).range([v-e.bottom,e.top]).nice();const s=E(g);r.append("g").attr("transform",`translate(${e.left}, 0)`).call(s),r.append("text").attr("class","bubbleChartXTitle").attr("fill","#000000").attr("x",`${f-e.right*6}`).attr("y",`${v-e.bottom/6}`).text("人口數").style("font-family","sans-serif").style("font-size","14px"),x("該行政區國民黨得票率","#000095")});const x=async(o,s)=>{r.selectAll(".bubbleChartYTitle").transition().duration(300).style("opacity","0").remove(),r.selectAll("circle").transition().duration(1e3).attr("r",0).remove();const n=await A(C),d=n.filter((t,l)=>l!==61);n.map(t=>+t.人口數),n.map(t=>p(".4f")(+t[o]));const m=n.map(t=>+t.一一一年底老年人口數/+t.人口數),c=$().domain(w(m)).range([1,25]);r.append("text").attr("class","bubbleChartYTitle").attr("fill","#000000").attr("x",`${e.left/4}`).attr("y",`${e.top*4}`).style("font-family","sans-serif").style("font-size","14px").selectAll("tspan").data(("該行政區"+o.substring(4,7)+"得票率").split("")).join("tspan").attr("x",`${e.left/6}`).attr("dy","1.1em").text(t=>t).style("opacity",0).transition().duration(200).style("opacity",1),r.append("g").selectAll("circle").data(d).join("circle").attr("cx",t=>_(t.人口數)).attr("cy",t=>g(t[o])).attr("fill",s).style("cursor","pointer").style("opacity",.8).on("mouseover",k).on("mouseout",a).transition().duration(1e3).attr("r",t=>parseFloat(c(+t.一一一年底老年人口數/+t.人口數)));const h=i(u.value).style("position","relative").append("div").style("position","absolute").style("display","none").style("background-color","#121212").style("color","#f2f2f2").style("border","#f2f2f2").style("border-radius","8px").style("padding","6px").style("font-family","sans-serif").style("font-size","12px").style("white-space","nowrap").style("opacity","0.85");function k(t){i(this).attr("r",b=>parseFloat(c(+b.一一一年底老年人口數/+b.人口數))+8).attr("fill","black").style("opacity",.8);let l=z(t,t.target);h.style("display","block").html(`<p style="margin: 0;">
             <strong>${t.target.__data__.縣市+t.target.__data__.行政區}</strong><br>
             2024一月人口數：${p(",")(t.target.__data__.人口數)} 人<br>
             老年人口比例：${p(".4f")(+t.target.__data__.一一一年底老年人口數/+t.target.__data__.人口數*100)}%<br>
             ${o}：${p(".2f")(t.target.__data__[o]*100)}%
           </p>`).style("left",`${l[0]+10<f?l[0]+10:l[0]-e.right*40}px`).style("top",`${l[1]}px`)}function a(){i(this).attr("r",t=>parseFloat(c(+t.一一一年底老年人口數/+t.人口數))).attr("fill",s),h.style("display","none")}},F=async()=>{r.selectAll(".bubbleChartYTitle").transition().duration(300).style("opacity","0").remove(),r.selectAll("circle").transition().duration(1e3).attr("r",0).remove();const o=await A(C),s=o.filter((a,t)=>t!==61),n=o.map(a=>+a.一一一年底老年人口數/+a.人口數),d=$().domain(w(n)).range([1,25]),m={該行政區國民黨得票率:"#000095",該行政區民進黨得票率:"#1B9431",該行政區民眾黨得票率:"#28C8C8"};r.append("text").attr("class","bubbleChartYTitle").attr("fill","#000000").attr("x",`${e.left/4}`).attr("y",`${e.top*4}`).style("font-family","sans-serif").style("font-size","14px").selectAll("tspan").data("該行政區三大黨得票率".split("")).join("tspan").attr("x",`${e.left/6}`).attr("dy","1.1em").text(a=>a).style("opacity",0).transition().duration(200).style("opacity",1),Object.keys(m).forEach(a=>{r.append("g").selectAll("circle").data(s).join("circle").attr("cx",t=>_(t.人口數)).attr("cy",t=>g(t[a])).attr("fill",m[a]).attr("data-vote-key",a).style("cursor","pointer").style("opacity",.8).on("mouseover",h).on("mouseout",k).transition().duration(1e3).attr("r",t=>parseFloat(d(+t.一一一年底老年人口數/+t.人口數)))});const c=i(u.value).style("position","relative").append("div").style("position","absolute").style("display","none").style("background-color","#121212").style("color","#f2f2f2").style("border","#f2f2f2").style("border-radius","8px").style("padding","6px").style("font-family","sans-serif").style("font-size","12px").style("white-space","nowrap").style("opacity","0.85");function h(a){const t=i(this).attr("data-vote-key");i(this).attr("r",b=>parseFloat(d(+b.一一一年底老年人口數/+b.人口數))+8).attr("fill","black").style("opacity",.8);let l=z(a,a.target);c.style("display","block").html(`<p style="margin: 0;">
              <strong>${a.target.__data__.縣市+a.target.__data__.行政區}</strong><br>
              2024一月人口數：${p(",")(a.target.__data__.人口數)}<br>
              老年人口比例：${p(".4f")(+a.target.__data__.一一一年底老年人口數/+a.target.__data__.人口數*100)}%<br>
              ${t}：${p(".2f")(a.target.__data__[t]*100)}%
            </p>`).style("left",`${l[0]+10<f?l[0]+10:l[0]-e.right*40}px`).style("top",`${l[1]}px`)}function k(){const a=i(this).attr("data-vote-key");i(this).attr("r",t=>parseFloat(d(+t.一一一年底老年人口數/+t.人口數))).attr("fill",m[a]),c.style("display","none")}};return(o,s)=>(O(),M(Y,null,[y("div",{ref_key:"svgContainerRef",ref:u},null,512),y("div",{class:"btn-container",style:T({width:f+"px"})},[y("button",{type:"button",onClick:s[0]||(s[0]=n=>x("該行政區國民黨得票率","#000095")),class:"kmt-btn"},"國民黨"),y("button",{type:"button",onClick:s[1]||(s[1]=n=>x("該行政區民進黨得票率","#1b9431")),class:"dpp-btn"},"民進黨"),y("button",{type:"button",onClick:s[2]||(s[2]=n=>x("該行政區民眾黨得票率","#28c8c8")),class:"tpp-btn"},"民眾黨"),y("button",{type:"button",onClick:F,class:"all-btn"},"一起看")],4)],64))}},at=j(G,[["__scopeId","data-v-b5d9c480"]]);export{at as default};
