import"./transform-DNQUPihx.js";import{_ as V,r as x,o as q,G as H,c as v,f as T,b as C,F as J,d as O,j as Q,t as X,n as Y}from"./index-BE8DdE87.js";import{o as D}from"./ordinal-BXh_4XLC.js";import{p as Z,s as G}from"./pie-Vk8EeaUu.js";import{s as d}from"./select-1EGbaqqT.js";import{T as K}from"./Tableau10-Ci8Hh9LU.js";import{a as B}from"./arc-DcE2_U0A.js";import{p as E}from"./pointer-BV9FWJ6s.js";import{b as ee}from"./defaultLocale-B0Uv6ZVb.js";import{i as j}from"./value-BWAEs6ZY.js";import{i as ae}from"./round-O1hten6x.js";import"./init-Dmth1JHB.js";import"./array-DEnAxiAM.js";import"./constant-BhYcI2Bl.js";import"./colors-Cc3OSVma.js";import"./path-CsjuoHvu.js";const te=[{date:"2023/5/15",week:"Monday",breakfast:310,lunch:1065,dinner:1590,snack:0,total:2965},{date:"2023/5/16",week:"Tuesday",breakfast:758,lunch:412,dinner:1552,snack:0,total:2722},{date:"2023/5/17",week:"Wednesday",breakfast:294,lunch:1248,dinner:1715,snack:0,total:3257},{date:"2023/5/18",week:"Thursday",breakfast:206,lunch:1270,dinner:1695,snack:0,total:3171},{date:"2023/5/19",week:"Friday",breakfast:0,lunch:417,dinner:1936,snack:0,total:2353},{date:"2023/5/20",week:"Saturday",breakfast:294,lunch:1298,dinner:961,snack:526,total:3079},{date:"2023/5/21",week:"Sunday",breakfast:586,lunch:801,dinner:814,snack:26,total:2227},{date:"2023/5/22",week:"Monday",breakfast:721,lunch:796,dinner:944,snack:820,total:3281},{date:"2023/5/23",week:"Tuesday",breakfast:814,lunch:1292,dinner:1710,snack:0,total:3816},{date:"2023/5/24",week:"Wednesday",breakfast:395,lunch:697,dinner:1066,snack:0,total:2158},{date:"2023/5/25",week:"Thursday",breakfast:0,lunch:1195,dinner:1566,snack:231,total:2992},{date:"2023/5/26",week:"Friday",breakfast:0,lunch:1079,dinner:537,snack:824,total:2440},{date:"2023/5/27",week:"Saturday",breakfast:444,lunch:438,dinner:1109,snack:238,total:2229},{date:"2023/5/28",week:"Sunday",breakfast:527,lunch:905,dinner:1335,snack:544,total:3311},{date:"2023/5/29",week:"Monday",breakfast:294,lunch:808,dinner:960,snack:703,total:2765},{date:"2023/5/30",week:"Tuesday",breakfast:383,lunch:559,dinner:1142,snack:60,total:2144},{date:"2023/5/31",week:"Wednesday",breakfast:538,lunch:467,dinner:1558,snack:235,total:2798},{date:"total",week:"",breakfast:6564,lunch:14747,dinner:22190,snack:4207,total:47708}],ne=[{date:"2023/6/1",week:"Thursday",breakfast:246,lunch:1120,dinner:1052,snack:245,total:2663},{date:"2023/6/2",week:"Friday",breakfast:450,lunch:969,dinner:1258,snack:266,total:2943},{date:"2023/6/3",week:"Saturday",breakfast:348,lunch:804,dinner:634,snack:369,total:2155},{date:"2023/6/4",week:"Sunday",breakfast:499,lunch:845,dinner:1137,snack:658,total:3139},{date:"2023/6/5",week:"Monday",breakfast:484,lunch:546,dinner:897,snack:254,total:2181},{date:"2023/6/6",week:"Tuesday",breakfast:661,lunch:1024,dinner:794,snack:144,total:2623},{date:"2023/6/7",week:"Wednesday",breakfast:325,lunch:532,dinner:692,snack:821,total:2370},{date:"2023/6/8",week:"Thursday",breakfast:832,lunch:914,dinner:361,snack:563,total:2670},{date:"2023/6/9",week:"Friday",breakfast:364,lunch:682,dinner:377,snack:907,total:2330},{date:"2023/6/10",week:"Saturday",breakfast:653,lunch:1286,dinner:924,snack:615,total:3478},{date:"2023/6/11",week:"Sunday",breakfast:727,lunch:725,dinner:1436,snack:371,total:3259},{date:"2023/6/12",week:"Monday",breakfast:552,lunch:998,dinner:1137,snack:325,total:3012},{date:"2023/6/13",week:"Tuesday",breakfast:581,lunch:1090,dinner:613,snack:558,total:2842},{date:"2023/6/14",week:"Wednesday",breakfast:844,lunch:944,dinner:577,snack:0,total:2365},{date:"2023/6/15",week:"Thursday",breakfast:510,lunch:1019,dinner:1057,snack:0,total:2586},{date:"2023/6/16",week:"Friday",breakfast:461,lunch:851,dinner:868,snack:116,total:2296},{date:"2023/6/17",week:"Saturday",breakfast:722,lunch:1088,dinner:432,snack:56,total:2298},{date:"2023/6/18",week:"Sunday",breakfast:570,lunch:406,dinner:605,snack:549,total:2130},{date:"2023/6/19",week:"Monday",breakfast:623,lunch:529,dinner:898,snack:168,total:2218},{date:"2023/6/20",week:"Tuesday",breakfast:612,lunch:788,dinner:1194,snack:486,total:3080},{date:"2023/6/21",week:"Wednesday",breakfast:284,lunch:1202,dinner:683,snack:164,total:2333},{date:"2023/6/22",week:"Thursday",breakfast:663,lunch:634,dinner:499,snack:232,total:2028},{date:"2023/6/23",week:"Friday",breakfast:423,lunch:1015,dinner:832,snack:293,total:2563},{date:"2023/6/24",week:"Saturday",breakfast:724,lunch:428,dinner:1048,snack:682,total:2882},{date:"2023/6/25",week:"Sunday",breakfast:430,lunch:986,dinner:1645,snack:132,total:3193},{date:"2023/6/26",week:"Monday",breakfast:164,lunch:407,dinner:1230,snack:664,total:2465},{date:"2023/6/27",week:"Tuesday",breakfast:430,lunch:704,dinner:1286,snack:430,total:2850},{date:"2023/6/28",week:"Wednesday",breakfast:509,lunch:632,dinner:556,snack:588,total:2285},{date:"2023/6/29",week:"Thursday",breakfast:37,lunch:439,dinner:927,snack:593,total:1996},{date:"2023/6/30",week:"Friday",breakfast:419,lunch:278,dinner:795,snack:151,total:1643},{date:"total",week:"",breakfast:15147,lunch:23885,dinner:26444,snack:11400,total:76876}],se=[{date:"2023-07-01",week:"Saturday",breakfast:975,lunch:490,dinner:1147,snack:431,total:3043},{date:"2023-07-02",week:"Sunday",breakfast:258,lunch:733,dinner:1298,snack:692,total:2981},{date:"2023-07-03",week:"Monday",breakfast:294,lunch:844,dinner:1326,snack:0,total:2464},{date:"2023-07-04",week:"Tuesday",breakfast:782,lunch:629,dinner:1101,snack:237,total:2749},{date:"2023-07-05",week:"Wednesday",breakfast:410,lunch:1162,dinner:1297,snack:0,total:2869},{date:"2023-07-06",week:"Thursday",breakfast:598,lunch:743,dinner:930,snack:501,total:2772},{date:"2023-07-07",week:"Friday",breakfast:0,lunch:774,dinner:566,snack:417,total:1757},{date:"2023-07-08",week:"Saturday",breakfast:287,lunch:1305,dinner:1163,snack:0,total:2755},{date:"2023-07-09",week:"Sunday",breakfast:278,lunch:121,dinner:1332,snack:0,total:1731},{date:"2023-07-10",week:"Monday",breakfast:0,lunch:998,dinner:514,snack:977,total:2489},{date:"2023-07-11",week:"Tuesday",breakfast:0,lunch:1525,dinner:468,snack:16,total:2009},{date:"2023-07-12",week:"Wednesday",breakfast:932,lunch:665,dinner:1312,snack:12,total:2921},{date:"2023-07-13",week:"Thursday",breakfast:486,lunch:281,dinner:1001,snack:569,total:2337},{date:"2023-07-14",week:"Friday",breakfast:519,lunch:917,dinner:794,snack:0,total:2230},{date:"2023-07-15",week:"Saturday",breakfast:450,lunch:717,dinner:1448,snack:163,total:2778},{date:"2023-07-16",week:"Sunday",breakfast:549,lunch:910,dinner:1237,snack:188,total:2884},{date:"2023-07-17",week:"Monday",breakfast:0,lunch:625,dinner:999,snack:576,total:2200},{date:"2023-07-18",week:"Tuesday",breakfast:286,lunch:1141,dinner:1219,snack:0,total:2646},{date:"2023-07-19",week:"Wednesday",breakfast:536,lunch:989,dinner:749,snack:307,total:2581},{date:"2023-07-20",week:"Thursday",breakfast:909,lunch:632,dinner:996,snack:163,total:2700},{date:"2023-07-21",week:"Friday",breakfast:478,lunch:1236,dinner:1191,snack:286,total:3191},{date:"2023-07-22",week:"Saturday",breakfast:1001,lunch:559,dinner:1417,snack:325,total:3302},{date:"2023-07-23",week:"Sunday",breakfast:381,lunch:970,dinner:858,snack:716,total:2925},{date:"2023-07-24",week:"Monday",breakfast:173,lunch:791,dinner:755,snack:0,total:1719},{date:"2023-07-25",week:"Tuesday",breakfast:479,lunch:674,dinner:1226,snack:305,total:2684},{date:"2023-07-26",week:"Wednesday",breakfast:663,lunch:431,dinner:1228,snack:862,total:3184},{date:"2023-07-27",week:"Thursday",breakfast:0,lunch:1068,dinner:1122,snack:121,total:2311},{date:"2023-07-28",week:"Friday",breakfast:325,lunch:608,dinner:707,snack:771,total:2411},{date:"2023-07-29",week:"Saturday",breakfast:388,lunch:1218,dinner:1126,snack:0,total:2732},{date:"2023-07-30",week:"Sunday",breakfast:449,lunch:399,dinner:1126,snack:623,total:2597},{date:"2023-07-31",week:"Monday",breakfast:388,lunch:623,dinner:967,snack:659,total:2637},{date:"total",week:"",breakfast:13274,lunch:24778,dinner:32620,snack:9917,total:80589}],re={class:"btn-container"},de=["onClick"],u=420,S=280,le=15,oe={__name:"D3jsSwitchPieChartsDemo",setup(ce){const f=["breakfast","lunch","dinner","snack"],o=x(null),y=x(null),h=x("202305"),_=[{key:"202305",label:"2023/05",data:te},{key:"202306",label:"2023/06",data:ne},{key:"202307",label:"2023/07",data:se}];let b,p,M,k,F,$,A,W,i;function L(t){return f.map(n=>{const r=G(t,c=>+c[n]||0);return{date:n,total:r}})}function P(t){return d(t).append("div").attr("class","d3-tooltip").style("position","absolute").style("pointer-events","none").style("display","none").style("background","#f2f2f2").style("color","#121212").style("border","1px solid #121212").style("border-radius","6px").style("padding","8px").style("font-size","13px").style("z-index",1e3)}function U(t){const n=L(t),r=G(n,e=>e.total)||1;n.forEach(e=>e.percentage=Math.round(e.total/r*100));const c=$(n),w=M.selectAll("path.slice").data(c,e=>e.data.date),z=w.enter().append("path").attr("class","slice").attr("fill",e=>F(e.data.date)).attr("stroke","#f2f2f2").attr("stroke-width",3).each(function(e){this._current=e}).style("opacity",0).style("transform-box","fill-box").style("transform-origin","center").merge(w);z.style("cursor","pointer").on("mouseover",function(e,s){const a=d(this);a.raise(),a.transition().duration(500).style("transform","scale(1.08)"),k.selectAll("text.label").filter(N=>N.data.date===s.data.date).transition().duration(500).style("font-size","20px");const[l,g]=E(e,o.value);i.html(`共 ${ee(",")(s.data.total)} 大卡`).style("left",`${l+12}px`).style("top",`${g+12}px`).style("display","block")}).on("mousemove",function(e){const[s,a]=E(e,o.value);i.style("left",`${s+12}px`).style("top",`${a+12}px`),d(this).style("filter","drop-shadow(2px 4px 6px rgba(0, 0, 0, 0.45))")}).on("mouseleave",function(e,s){d(this).transition().duration(500).style("transform","scale(1)").style("filter",null),k.selectAll("text.label").filter(a=>a.data.date===s.data.date).transition().duration(500).style("font-size","14px"),i.style("display","none")}),z.transition().duration(500).style("opacity",1).attrTween("d",function(e){const s=this._current||e,a=j(s,e);return this._current=a(1),l=>A(a(l))}),w.exit().transition().duration(500).style("opacity",0).remove();const I=D().domain(f).range(["早餐","午餐","晚餐","點心"]),m=k.selectAll("text.label").data(c,e=>e.data.date);m.enter().append("text").attr("class","label").attr("text-anchor","middle").style("font-size","14px").each(function(e){this._current=e}).style("opacity",0).merge(m).transition().duration(500).attrTween("transform",function(e){const s=this._current||e,a=j(s,e);return this._current=a(1),l=>`translate(${W.centroid(a(l))})`}).tween("text",function(e){const s=this.textContent.replace(/[^\d]/g,""),a=s!==""?+s:e.data.percentage,l=ae(a,e.data.percentage);return g=>d(this).text(`${I(e.data.date)} ${l(g)}%`)}).style("opacity",1),m.exit().transition().duration(500).style("opacity",0).remove()}function R(t){h.value=t;const n=_.find(r=>r.key===t);n&&U(n.data)}return q(()=>{b=d(y.value),b.selectAll("*").remove(),p=b.append("g").attr("transform",`translate(${u/2}, ${S/2})`),M=p.append("g").attr("class","arcs-group"),k=p.append("g").attr("class","labels-group"),F=D().domain(f).range(K);const t=Math.min(u,S)/2-le;$=Z().value(n=>n.total).sort(null),A=B().innerRadius(0).outerRadius(t),W=B().innerRadius(t-10).outerRadius(t),i=P(o.value),R(h.value)}),H(()=>{d(y.value).selectAll("*").interrupt(),d(o.value).selectAll(".d3-tooltip").remove()}),(t,n)=>(T(),v("div",{ref_key:"containerRef",ref:o,style:Y([{width:u+"px"},{position:"relative"}])},[(T(),v("svg",{ref_key:"svgRef",ref:y,width:u,height:S},null,512)),C("div",re,[(T(),v(J,null,O(_,r=>C("button",{key:r.key,class:Q(["month-btn",{"active-month-btn":h.value===r.key}]),onClick:c=>R(r.key)},X(r.label),11,de)),64))])],4))}},Ae=V(oe,[["__scopeId","data-v-118c2fac"]]);export{Ae as default};
