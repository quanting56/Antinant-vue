import{t as K,c as Q,a as V,b as W,d as _}from"./continuous-DMmkvEoj.js";import{i as nn}from"./init-Dmth1JHB.js";function tn(n){return Math.abs(n=Math.round(n))>=1e21?n.toLocaleString("en").replace(/,/g,""):n.toString(10)}function j(n,r){if((i=(n=r?n.toExponential(r-1):n.toExponential()).indexOf("e"))<0)return null;var i,t=n.slice(0,i);return[t.length>1?t[0]+t.slice(2):t,+n.slice(i+1)]}function x(n){return n=j(Math.abs(n)),n?n[1]:NaN}function rn(n,r){return function(i,t){for(var a=i.length,o=[],f=0,h=n[0],l=0;a>0&&h>0&&(l+h+1>t&&(h=Math.max(1,t-l)),o.push(i.substring(a-=h,a+h)),!((l+=h+1)>t));)h=n[f=(f+1)%n.length];return o.reverse().join(r)}}function an(n){return function(r){return r.replace(/[0-9]/g,function(i){return n[+i]})}}var en=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function E(n){if(!(r=en.exec(n)))throw new Error("invalid format: "+n);var r;return new L({fill:r[1],align:r[2],sign:r[3],symbol:r[4],zero:r[5],width:r[6],comma:r[7],precision:r[8]&&r[8].slice(1),trim:r[9],type:r[10]})}E.prototype=L.prototype;function L(n){this.fill=n.fill===void 0?" ":n.fill+"",this.align=n.align===void 0?">":n.align+"",this.sign=n.sign===void 0?"-":n.sign+"",this.symbol=n.symbol===void 0?"":n.symbol+"",this.zero=!!n.zero,this.width=n.width===void 0?void 0:+n.width,this.comma=!!n.comma,this.precision=n.precision===void 0?void 0:+n.precision,this.trim=!!n.trim,this.type=n.type===void 0?"":n.type+""}L.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function on(n){n:for(var r=n.length,i=1,t=-1,a;i<r;++i)switch(n[i]){case".":t=a=i;break;case"0":t===0&&(t=i),a=i;break;default:if(!+n[i])break n;t>0&&(t=0);break}return t>0?n.slice(0,t)+n.slice(a+1):n}var Y;function fn(n,r){var i=j(n,r);if(!i)return n+"";var t=i[0],a=i[1],o=a-(Y=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,f=t.length;return o===f?t:o>f?t+new Array(o-f+1).join("0"):o>0?t.slice(0,o)+"."+t.slice(o):"0."+new Array(1-o).join("0")+j(n,Math.max(0,r+o-1))[0]}function G(n,r){var i=j(n,r);if(!i)return n+"";var t=i[0],a=i[1];return a<0?"0."+new Array(-a).join("0")+t:t.length>a+1?t.slice(0,a+1)+"."+t.slice(a+1):t+new Array(a-t.length+2).join("0")}const X={"%":(n,r)=>(n*100).toFixed(r),b:n=>Math.round(n).toString(2),c:n=>n+"",d:tn,e:(n,r)=>n.toExponential(r),f:(n,r)=>n.toFixed(r),g:(n,r)=>n.toPrecision(r),o:n=>Math.round(n).toString(8),p:(n,r)=>G(n*100,r),r:G,s:fn,X:n=>Math.round(n).toString(16).toUpperCase(),x:n=>Math.round(n).toString(16)};function v(n){return n}var O=Array.prototype.map,U=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function sn(n){var r=n.grouping===void 0||n.thousands===void 0?v:rn(O.call(n.grouping,Number),n.thousands+""),i=n.currency===void 0?"":n.currency[0]+"",t=n.currency===void 0?"":n.currency[1]+"",a=n.decimal===void 0?".":n.decimal+"",o=n.numerals===void 0?v:an(O.call(n.numerals,String)),f=n.percent===void 0?"%":n.percent+"",h=n.minus===void 0?"−":n.minus+"",l=n.nan===void 0?"NaN":n.nan+"";function s(u){u=E(u);var w=u.fill,k=u.align,c=u.sign,S=u.symbol,b=u.zero,N=u.width,I=u.comma,y=u.precision,T=u.trim,m=u.type;m==="n"?(I=!0,m="g"):X[m]||(y===void 0&&(y=12),T=!0,m="g"),(b||w==="0"&&k==="=")&&(b=!0,w="0",k="=");var B=S==="$"?i:S==="#"&&/[boxX]/.test(m)?"0"+m.toLowerCase():"",H=S==="$"?t:/[%p]/.test(m)?f:"",C=X[m],J=/[defgprs%]/.test(m);y=y===void 0?6:/[gprs]/.test(m)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y));function R(e){var M=B,d=H,p,D,P;if(m==="c")d=C(e)+d,e="";else{e=+e;var z=e<0||1/e<0;if(e=isNaN(e)?l:C(Math.abs(e),y),T&&(e=on(e)),z&&+e==0&&c!=="+"&&(z=!1),M=(z?c==="("?c:h:c==="-"||c==="("?"":c)+M,d=(m==="s"?U[8+Y/3]:"")+d+(z&&c==="("?")":""),J){for(p=-1,D=e.length;++p<D;)if(P=e.charCodeAt(p),48>P||P>57){d=(P===46?a+e.slice(p+1):e.slice(p))+d,e=e.slice(0,p);break}}}I&&!b&&(e=r(e,1/0));var A=M.length+e.length+d.length,g=A<N?new Array(N-A+1).join(w):"";switch(I&&b&&(e=r(g+e,g.length?N-d.length:1/0),g=""),k){case"<":e=M+e+d+g;break;case"=":e=M+g+e+d;break;case"^":e=g.slice(0,A=g.length>>1)+M+e+d+g.slice(A);break;default:e=g+M+e+d;break}return o(e)}return R.toString=function(){return u+""},R}function $(u,w){var k=s((u=E(u),u.type="f",u)),c=Math.max(-8,Math.min(8,Math.floor(x(w)/3)))*3,S=Math.pow(10,-c),b=U[8+c/3];return function(N){return k(S*N)+b}}return{format:s,formatPrefix:$}}var F,Z,q;hn({thousands:",",grouping:[3],currency:["$",""]});function hn(n){return F=sn(n),Z=F.format,q=F.formatPrefix,F}function un(n){return Math.max(0,-x(Math.abs(n)))}function mn(n,r){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(x(r)/3)))*3-x(Math.abs(n)))}function dn(n,r){return n=Math.abs(n),r=Math.abs(r)-n,Math.max(0,x(r)-x(n))+1}function cn(n,r,i,t){var a=K(n,r,i),o;switch(t=E(t??",f"),t.type){case"s":{var f=Math.max(Math.abs(n),Math.abs(r));return t.precision==null&&!isNaN(o=mn(a,f))&&(t.precision=o),q(t,f)}case"":case"e":case"g":case"p":case"r":{t.precision==null&&!isNaN(o=dn(a,Math.max(Math.abs(n),Math.abs(r))))&&(t.precision=o-(t.type==="e"));break}case"f":case"%":{t.precision==null&&!isNaN(o=un(a))&&(t.precision=o-(t.type==="%")*2);break}}return Z(t)}function gn(n){var r=n.domain;return n.ticks=function(i){var t=r();return W(t[0],t[t.length-1],i??10)},n.tickFormat=function(i,t){var a=r();return cn(a[0],a[a.length-1],i??10,t)},n.nice=function(i){i==null&&(i=10);var t=r(),a=0,o=t.length-1,f=t[a],h=t[o],l,s,$=10;for(h<f&&(s=f,f=h,h=s,s=a,a=o,o=s);$-- >0;){if(s=_(f,h,i),s===l)return t[a]=f,t[o]=h,r(t);if(s>0)f=Math.floor(f/s)*s,h=Math.ceil(h/s)*s;else if(s<0)f=Math.ceil(f*s)/s,h=Math.floor(h*s)/s;else break;l=s}return n},n}function ln(){var n=Q();return n.copy=function(){return V(n,ln())},nn.apply(n,arguments),gn(n)}export{L as F,gn as a,E as b,sn as c,hn as d,q as e,Z as f,mn as g,dn as h,ln as l,un as p,cn as t};
